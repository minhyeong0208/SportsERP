<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Player Management - Football Team ERP</title>
<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
	rel="stylesheet">
<!-- Admin CSS -->
<link rel="stylesheet" href="/admin/css/admin.css">
<!-- Vue.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>

<style>
/* 모든 테이블 안의 이미지를 50x50 픽셀로 조정 */
table img {
	width: 50px;
	height: 50px;
	object-fit: cover; /* 이미지 비율을 유지하면서 크기를 맞춤 */
}
</style>
</head>

<body>

	<div id="app">
		<admin-header></admin-header>
		<admin-sidebar></admin-sidebar>
		<div class="container mt-5">
			<h2>선수 관리</h2>

			<!-- 선수 목록 테이블 -->
			<table class="table table-bordered mt-3">
				<thead class="table-dark">
					<tr>
						<th>사진</th>
						<th>등번호</th>
						<th>이름</th>
						<th>포지션</th>
						<th>국적</th>
						<th>잠재력</th>
						<th>생일</th>
						<th>계약 시작일</th>
						<th>계약 종료일</th>
						<th>경력</th>
						<th>관리</th>
					</tr>
				</thead>
				<tbody>
					<tr v-for="player in players" :key="player.playerId">
						<td><img :src="player.playerImage" :alt="player.playerName"
							style="width: 50px; height: 50px;"></td>
						<td>{{ player.playerBn }}</td>
						<td>{{ player.playerName }}</td>
						<td>{{ player.playerPosition }}</td>
						<td>{{ player.playerNationality }}</td>
						<td>{{ player.playerPotential }}</td>
						<td>{{ player.playerBirth }}</td>
						<td>{{ player.contractStartDate }}</td>
						<td>{{ player.contractEndDate }}</td>
						<td>{{ player.career }}</td>
						<td>
							<button class="btn btn-primary btn-sm"
								@click="editPlayer(player)">수정</button>
							<button class="btn btn-danger btn-sm"
								@click="deletePlayer(player.playerId)">삭제</button>
						</td>
					</tr>
				</tbody>
			</table>

			<!-- 선수 추가 버튼 -->
			<button class="btn btn-success mt-3" @click="openAddPlayerModal">선수
				추가</button>

			<!-- 선수 추가/수정 모달 -->
			<div class="modal fade" id="playerModal" tabindex="-1"
				aria-labelledby="playerModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="playerModalLabel">{{
								editingPlayerId ? '선수 수정' : '선수 추가' }}</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal"
								aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<form @submit.prevent="savePlayer">
								<div class="mb-3">
									<label for="playerImage" class="form-label">사진</label> <input
										type="file" class="form-control" id="playerImage"
										ref="playerImage">
								</div>
								<div class="mb-3">
									<label for="playerBn" class="form-label">등번호</label> <input
										type="number" class="form-control" id="playerBn"
										v-model="playerForm.playerBn" required>
								</div>
								<div class="mb-3">
									<label for="playerName" class="form-label">이름</label> <input
										type="text" class="form-control" id="playerName"
										v-model="playerForm.playerName" required>
								</div>
								<div class="mb-3">
									<label for="playerPosition" class="form-label">포지션</label> <input
										type="text" class="form-control" id="playerPosition"
										v-model="playerForm.playerPosition" required>
								</div>
								<div class="mb-3">
									<label for="playerNationality" class="form-label">국적</label> <input
										type="text" class="form-control" id="playerNationality"
										v-model="playerForm.playerNationality" required>
								</div>
								<div class="mb-3">
									<label for="playerPotential" class="form-label">잠재력</label> <input
										type="number" class="form-control" id="playerPotential"
										v-model="playerForm.playerPotential" required>
								</div>
								<div class="mb-3">
									<label for="playerBirth" class="form-label">생일</label> <input
										type="date" class="form-control" id="playerBirth"
										v-model="playerForm.playerBirth" required>
								</div>
								<div class="mb-3">
									<label for="contractStartDate" class="form-label">계약
										시작일</label> <input type="date" class="form-control"
										id="contractStartDate" v-model="playerForm.contractStartDate"
										required>
								</div>
								<div class="mb-3">
									<label for="contractEndDate" class="form-label">계약 종료일</label>
									<input type="date" class="form-control" id="contractEndDate"
										v-model="playerForm.contractEndDate" required>
								</div>
								<div class="mb-3">
									<label for="career" class="form-label">경력</label>
									<textarea class="form-control" id="career"
										v-model="playerForm.career" required></textarea>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary"
										data-bs-dismiss="modal">취소</button>
									<button type="submit" class="btn btn-primary">저장</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- player.js 파일을 불러옴 -->
	<script src="/admin/js/admin-header.js"></script>
	<script src="/admin/js/admin-sidebar.js"></script>
	<script src="/admin/js/player.js"></script>
	<!-- Bootstrap JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
